<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7th Grade American History - Vocabulary Library</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* A little custom CSS for scrollbar styling to match the dark theme */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937; /* bg-gray-800 */
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563; /* bg-gray-600 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280; /* bg-gray-500 */
        }
        /* Styles for printing the word wall */
        @media print {
            body * {
                visibility: hidden;
            }
            #main-content, #main-content * {
                visibility: visible;
            }
            #main-content {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
            .word-wall-card {
                page-break-inside: avoid;
                border: 2px solid #000 !important;
            }
            .word-wall-card img {
                max-width: 100%;
            }
        }
        /* Loading Spinner */
        .loader {
            border: 5px solid #f3f3f3; /* Light grey */
            border-top: 5px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-900 font-sans">

    <div class="flex h-screen">
        <!-- Sidebar for Unit Navigation -->
        <nav id="sidebar" class="w-64 bg-gray-800 text-white p-4 flex-shrink-0 flex flex-col">
            <h1 class="text-2xl font-bold mb-6">U.S. History</h1>
            <ul id="unit-list" class="flex-grow">
                <!-- Unit buttons will be inserted here by JavaScript -->
            </ul>
            <div class="space-y-2">
                 <button id="word-wall-btn" class="w-full text-left p-3 rounded-lg transition-colors duration-200 bg-green-600 hover:bg-green-700 font-bold">
                    Word Wall (No Images)
                </button>
                <button id="ai-word-wall-btn" class="w-full text-left p-3 rounded-lg transition-colors duration-200 bg-blue-600 hover:bg-blue-700 font-bold">
                    Generate Word Wall with AI Images
                </button>
            </div>
        </nav>

        <!-- Main Content Area to Display Vocabulary -->
        <main id="main-content" class="flex-1 p-8 overflow-y-auto">
            <!-- Vocabulary content will be inserted here by JavaScript -->
        </main>
    </div>

    <script>
        // --- Data Structure for Vocabulary ---
        const vocabularyData = {
          "Unit 1": {
            title: "Unit 1: Creating a New Nation",
            summary: "This unit covers the foundational conflicts, ideas, and documents that led to the formation of the United States, from colonial grievances to the ratification of the Constitution.",
            sections: [
              {
                sectionTitle: "Causes of the American Revolution",
                terms: [
                  { term: "Salutary Neglect", partOfSpeech: "Noun", definition: "The unofficial British policy where rules and laws were not strictly enforced on the American colonies.", context: "Salutary neglect allowed the colonies to develop a strong sense of self-government." },
                  { term: "Mercantilism", partOfSpeech: "Noun", definition: "An economic system where colonies provide raw materials to the mother country, which then produces and sells finished goods back to the colonies.", context: "The goal of mercantilism was to make the mother country, Great Britain, wealthy and powerful." },
                  { term: "Boycott", partOfSpeech: "Verb/Noun", definition: "To refuse to buy, use, or participate in something as a form of protest.", context: "Colonists organized a boycott of British tea to protest the tax." },
                  { term: "Tax (Tariff)", partOfSpeech: "Noun", definition: "Money that people are required to pay to support the workings of the government.", context: "The Stamp Act was a tax on all paper goods in the colonies." },
                  { term: "Sons of Liberty", partOfSpeech: "Noun", definition: "A group of American colonists, led by Samuel Adams, who opposed British taxation through protests and boycotts.", context: "The Sons of Liberty played a key role in organizing the Boston Tea Party." },
                  { term: "Militia", partOfSpeech: "Noun", definition: "A volunteer army of citizens who are not professional soldiers but are trained to fight in emergencies.", context: "The colonial militia, including the Minutemen, played a crucial role in the early battles of the Revolution." },
                ]
              },
              {
                sectionTitle: "Declaration of Independence",
                terms: [
                  { term: "Natural Rights", partOfSpeech: "Noun", definition: "Rights that all people are born with and that cannot be taken away, such as life, liberty, and property.", context: "The Declaration of Independence is based on the idea of natural rights." },
                  { term: "Tyranny", partOfSpeech: "Noun", definition: "Cruel and oppressive government or rule.", context: "The colonists accused King George III of tyranny." },
                ]
              },
              {
                sectionTitle: "Articles of Confederation & Constitution",
                terms: [
                    { term: "Articles of Confederation", partOfSpeech: "Noun", definition: "The first constitution of the United States, which created a weak central government.", context: "Under the Articles of Confederation, the states held most of the power." },
                    { term: "Confederation", partOfSpeech: "Noun", definition: "A union of states where most political power is retained by the states, with a weak central authority.", context: "The United States operated as a confederation after the Revolutionary War." },
                    { term: "Ratification", partOfSpeech: "Noun", definition: "The official act of signing or voting for an agreement to make it official.", context: "The ratification of the Articles of Confederation by all thirteen states was required for it to take effect." },
                    { term: "Shays' Rebellion", partOfSpeech: "Noun", definition: "An uprising of farmers in Massachusetts angry about high taxes, which highlighted the weakness of the Articles.", context: "Shays' Rebellion convinced many leaders that the U.S. needed a stronger central government." },
                    { term: "Constitutional Convention", partOfSpeech: "Noun", definition: "The 1787 meeting in Philadelphia where delegates decided to replace the Articles of Confederation with a new Constitution.", context: "The Constitutional Convention brought together leaders like George Washington and James Madison." },
                ]
              }
            ]
          },
          "Unit 2": {
            title: "Unit 2: The Living Constitution",
            summary: "This unit breaks down the structure of the U.S. government, the principles it is founded on, and the rights of its citizens.",
            sections: [
              {
                sectionTitle: "The Three Branches of Government",
                terms: [
                  { term: "Legislative Branch", partOfSpeech: "Noun", definition: "The branch of government that makes laws (Congress).", context: "The Legislative Branch includes the Senate and the House of Representatives." },
                  { term: "Executive Branch", partOfSpeech: "Noun", definition: "The branch of government that carries out and enforces laws, led by the President.", context: "The Executive Branch includes the President, Vice President, and Cabinet." },
                  { term: "Judicial Branch", partOfSpeech: "Noun", definition: "The branch of government that interprets laws and settles disputes, led by the Supreme Court.", context: "The Judicial Branch can declare laws unconstitutional through the power of judicial review." },
                  { term: "Judicial Review", partOfSpeech: "Noun", definition: "The power of the courts to determine if laws or government actions are constitutional.", context: "The landmark case Marbury v. Madison established the principle of judicial review." },
                ]
              },
              {
                sectionTitle: "Bill of Rights and Amendments",
                terms: [
                  { term: "Bill of Rights", partOfSpeech: "Noun", definition: "The first ten amendments to the U.S. Constitution, which protect the basic rights of citizens.", context: "The Bill of Rights guarantees freedoms like speech, religion, and the right to a fair trial." },
                ]
              }
            ]
          },
          "Unit 3": {
            title: "Unit 3: The New Republic",
            summary: "This unit covers the early years of the United States under its new Constitution, focusing on the precedents set by George Washington, the rise of political parties, and the nation's expansion.",
            sections: [
                {
                    sectionTitle: "Foundations of the New Republic",
                    terms: [
                        { term: "Impressment", partOfSpeech: "Noun", definition: "The act of forcing people to serve in a country's army or navy.", context: "The British navy's impressment of American sailors was a major cause of the War of 1812." },
                        { term: "Louisiana Purchase", partOfSpeech: "Noun", definition: "The 1803 acquisition of territory from France that doubled the size of the United States.", context: "The Louisiana Purchase gave the U.S. control of the Mississippi River." },
                        { term: "War of 1812", partOfSpeech: "Noun", definition: "A war between the United States and Great Britain, sometimes called the 'Second War of Independence.'", context: "The defense of Fort McHenry during the War of 1812 inspired the national anthem." },
                        { term: "Monroe Doctrine", partOfSpeech: "Noun", definition: "A U.S. policy that opposed European colonialism in the Americas.", context: "The Monroe Doctrine warned European nations not to interfere in the Western Hemisphere." },
                        { term: "Indian Removal Act", partOfSpeech: "Noun", definition: "A law signed by President Andrew Jackson that forced Native American tribes to move from their lands to territory west of the Mississippi River.", context: "The Indian Removal Act led to the tragic journey known as the Trail of Tears." },
                    ]
                }
            ]
          },
          "Unit 4": {
            title: "Unit 4: US Expansion & Industry",
            summary: "This unit examines the Industrial Revolution, social reform movements, and the concept of Manifest Destiny that drove westward expansion and led to conflict with Mexico.",
            sections: [
                {
                    sectionTitle: "Expansion and Industry",
                    terms: [
                        { term: "Industrial Revolution", partOfSpeech: "Noun", definition: "A period of major changes in manufacturing that transformed the economy.", context: "The Industrial Revolution led to the growth of factories and cities in the North." },
                        { term: "Cotton Gin", partOfSpeech: "Noun", definition: "A machine that quickly separated cotton fibers from their seeds.", context: "The invention of the cotton gin greatly increased the demand for enslaved labor in the South." },
                        { term: "Abolitionist", partOfSpeech: "Noun", definition: "A person who worked to end slavery.", context: "Famous abolitionists like Frederick Douglass and Harriet Tubman fought to end slavery." },
                        { term: "Manifest Destiny", partOfSpeech: "Noun", definition: "The 19th-century belief that the United States was destined to expand across the continent.", context: "The idea of Manifest Destiny was used to justify the Mexican-American War." },
                        { term: "Gold Rush", partOfSpeech: "Noun", definition: "A rapid movement of people to a newly discovered goldfield.", context: "The California Gold Rush of 1849 caused a massive increase in the state's population." },
                        { term: "Suffrage", partOfSpeech: "Noun", definition: "The right to vote in political elections.", context: "The women's rights movement fought for suffrage for many decades." },
                    ]
                }
            ]
          }
        };

        const mainContent = document.getElementById('main-content');
        const unitList = document.getElementById('unit-list');
        const wordWallBtn = document.getElementById('word-wall-btn');
        const aiWordWallBtn = document.getElementById('ai-word-wall-btn');
        let currentUnit = Object.keys(vocabularyData)[0];

        // --- Functions to Render Content ---

        function showUnit(unitKey) {
            currentUnit = unitKey;
            const unitData = vocabularyData[unitKey];
            mainContent.innerHTML = '';
            updateSidebar();

            if (!unitData) {
                mainContent.innerHTML = '<div class="p-8 text-white">Select a unit to begin.</div>';
                return;
            }

            const header = document.createElement('header');
            header.className = 'mb-8 border-b-2 border-gray-700 pb-4';
            header.innerHTML = `
                <h2 class="text-4xl font-extrabold text-white">${unitData.title}</h2>
                <p class="text-lg text-gray-400 mt-2">${unitData.summary}</p>
            `;
            mainContent.appendChild(header);

            unitData.sections.forEach(section => {
                const sectionEl = document.createElement('section');
                sectionEl.className = 'mb-10';
                
                const sectionTitle = document.createElement('h3');
                sectionTitle.className = 'text-3xl font-semibold text-blue-400 mb-6';
                sectionTitle.textContent = section.sectionTitle;
                sectionEl.appendChild(sectionTitle);

                const grid = document.createElement('div');
                grid.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6';

                section.terms.forEach(term => {
                    const card = document.createElement('div');
                    card.className = 'bg-gray-800 p-6 rounded-xl shadow-lg flex flex-col';
                    card.innerHTML = `
                        <h4 class="text-xl font-bold text-white">${term.term}</h4>
                        <p class="text-sm text-gray-400 italic mb-3">${term.partOfSpeech}</p>
                        <p class="text-gray-300 mb-4 flex-grow">${term.definition}</p>
                        <p class="text-gray-400 text-sm bg-gray-700 p-3 rounded-md">
                            <span class="font-bold">Context:</span> ${term.context}
                        </p>
                    `;
                    grid.appendChild(card);
                });

                sectionEl.appendChild(grid);
                mainContent.appendChild(sectionEl);
            });
        }

        function showWordWall(useAiImages = false, generatedImages = null) {
            const unitData = vocabularyData[currentUnit];
            mainContent.innerHTML = '';

            const header = document.createElement('header');
            header.className = 'mb-8 border-b-2 border-gray-700 pb-4';
            header.innerHTML = `<h2 class="text-4xl font-extrabold text-white">Word Wall: ${unitData.title}</h2>`;
            mainContent.appendChild(header);

            const container = document.createElement('div');
            container.className = 'space-y-4';

            let termIndex = 0;
            unitData.sections.forEach(section => {
                section.terms.forEach(term => {
                    const card = document.createElement('div');
                    card.className = 'word-wall-card bg-white text-gray-800 p-4 rounded-lg shadow-lg border-4 border-blue-500';
                    const placeholderUrl = `https://placehold.co/400x300/e2e8f0/64748b?text=Image`;
                    
                    let imageUrl = placeholderUrl;
                    if (useAiImages && generatedImages && generatedImages[term.term]) {
                        imageUrl = generatedImages[term.term];
                    }

                    card.innerHTML = `
                        <div class="text-center bg-blue-500 text-white font-bold text-4xl py-2 rounded-t-md -mx-4 -mt-4 mb-4">
                            ${term.term.toUpperCase()}
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="w-2/3 text-lg">
                                ${term.definition}
                            </div>
                            <div class="w-1/3">
                                <img src="${imageUrl}" alt="Historical image related to ${term.term}" class="rounded-md border border-gray-300 object-cover h-40 w-full" onerror="this.onerror=null;this.src='${placeholderUrl}';">
                            </div>
                        </div>
                    `;
                    container.appendChild(card);
                    termIndex++;
                });
            });
            mainContent.appendChild(container);
        }

        async function generateAiImagesAndShowWordWall() {
            mainContent.innerHTML = `
                <div class="flex flex-col items-center justify-center h-full text-white">
                    <div class="loader mb-4"></div>
                    <p class="text-xl">Generating AI images for your word wall...</p>
                    <p class="text-gray-400">This may take a moment.</p>
                </div>`;

            const unitData = vocabularyData[currentUnit];
            const allTerms = unitData.sections.flatMap(s => s.terms);
            const generatedImages = {};

            for (const term of allTerms) {
                const prompt = `A historical illustration suitable for a 7th-grade classroom word wall, representing the concept of '${term.term}'. Style: simple, clear, historical engraving or drawing.`;
                
                try {
                    const apiKey = ""; // API key is handled by the environment
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-002:predict?key=${apiKey}`;
                    const payload = {
                        instances: [{ prompt: prompt }],
                        parameters: { "sampleCount": 1 }
                    };

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`API request failed with status ${response.status}`);
                    }

                    const result = await response.json();
                    if (result.predictions && result.predictions.length > 0 && result.predictions[0].bytesBase64Encoded) {
                        generatedImages[term.term] = `data:image/png;base64,${result.predictions[0].bytesBase64Encoded}`;
                    } else {
                         generatedImages[term.term] = null; // Mark as failed
                    }
                } catch (error) {
                    console.error(`Error generating image for ${term.term}:`, error);
                    generatedImages[term.term] = null; // Mark as failed
                }
            }
            
            showWordWall(true, generatedImages);
        }

        function updateSidebar() {
            const buttons = unitList.querySelectorAll('button');
            buttons.forEach(button => {
                if (button.dataset.unit === currentUnit) {
                    button.className = 'w-full text-left p-3 rounded-lg transition-colors duration-200 bg-blue-600 font-bold';
                } else {
                    button.className = 'w-full text-left p-3 rounded-lg transition-colors duration-200 hover:bg-gray-700';
                }
            });
        }
        
        function populateSidebar() {
            Object.keys(vocabularyData).forEach(unitKey => {
                const li = document.createElement('li');
                li.className = 'mb-2';
                
                const button = document.createElement('button');
                button.textContent = unitKey;
                button.dataset.unit = unitKey;
                button.onclick = () => showUnit(unitKey);
                
                li.appendChild(button);
                unitList.appendChild(li);
            });
        }

        wordWallBtn.addEventListener('click', () => showWordWall(false));
        aiWordWallBtn.addEventListener('click', generateAiImagesAndShowWordWall);

        document.addEventListener('DOMContentLoaded', () => {
            populateSidebar();
            showUnit(currentUnit);
        });

    </script>
</body>
</html>
